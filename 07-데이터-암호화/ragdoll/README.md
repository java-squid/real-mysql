## TDE

- MySQL의 데이터 암호화 및 복호화는 디스크 I/O 단계에서만 실행된다.
- 이를 TDE(Transparent Data Encryption)라 한다.

## MySQL 서버의 데이터 암호화 방식

- MySQL 서버에는 마스터 키 테이블스페이스 키 두가지가 존재한다.
- 암호화가 적용된 테이블은 테이블 스페이스 키가 생성되고, 마스터 키로 암호화하여 테이블 데이터 파일 헤더에 저장한다.
- 테이블 스페이스 키는 내부에서만 사용하므로 별도 관리가 필요 없지만, 마스터 키는 외부에 저장하고 관리하기 때문에, 교체가 필요할 수 있다.
- 마스터 키 교체시에는 기존 마스터 키로 기존 테이블 스페이스 키를 복호화하고, 새로운 마스터 키로 재암호화하는 과정을 거친다.

## Undo, Redo log 암호화

- 테이블과 마찬가지로 Undo, Redo 로그 각각에 대해 프라이빗 키를 사용한다.
- 프라이빗 키는 각 로그를 암호화 하고, 마스터 키는 프라이빗 키를 암호화 하는데에 사용된다.
- Undo, Redo 로그 암호화를 비활성화 하더라도, 이미 암호화 했던 것까지 평문이 되는 것은 아니기 때문에 일정 시간 프라이빗 키를 유지해야한다.

## mysqlbinlog

- mysqlbinlog의 복호화는 암호화를 진행한 MySQL 서버 컨텍스트 안에서만 가능하다.
- mysqlbinlog 툴만 가지고는 접근이 불가하고, 꼭 해당 MySQL 서버를 경로로 거쳐야한다.

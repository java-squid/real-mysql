## 블록 네스티드 루프 조인
- MySQL서버에서 사용되는 대부분의 조인은 네스티드 루프 조인이고, 조인의 연결 조건이 되는 컬럼에 모두 인덱스가 있는 경우 사용되는 조인 방식이다.
- 조인 버퍼가 사용되는지 여부와 조인에서 드라이빈 테이블과 드리븐 테이블이 어떤 순서로 조인되느냐의 네스티드 루프 조인과 차이가 있다.
- 조인 알고리즘에서 `Block`이라는 단어가 사용되면 조인용으로 별도의 버퍼가 사용됐다는 것을 의미한다. 조인 쿼리의 실행 계획에서 Extra컬럼에 `Using Join Buffer`라는 문구가 표시되면 조인 버퍼를 사용한다는 의미이다.
- 조인시 드리븐 테이블의 조인 조건이 인덱스를 사용하지 못하면 연결되는 레코드를 찾기위해 일치하는 조건만큼의 풀 스캔이 발생하게 된다.
- 옵티마이저는 최대한 드리븐 테이블의 검색이 인덱스를 사용할 수 있게 계획을 수립하려고 하지만 풀 스캔을 피할 수 없다면 옵티마이저는 드라이빙 테이블에서 읽은 레코드를 메모리에 캐시한 후 드리븐 테이블과 메모리 캐시를 조인하는 형태로 처리하는데 이 때 사용되는 메모리의 캐시를 `조인 버퍼(Join Buffer)`라고 한다. 조인버퍼는 시스템 변수로 크리를 조절할 수 있으며, 조인이 완료되면 바로 해제된다.
> MySQL 8.0.18 버전부터는 해시 조인 알고리즘이 도입되었고, MySQL 8.0.20 버전부터는 블록 네스티드 루프 조인은 더이상 사용되지 않고 해시 조인 알고리즘이 대체되어 사용된다. MySQL 8.0.20 이후의 실행 계획에서는 `Using Join Buffer(block nested loop)` 메세지는 표시되지 않을 수 있다.